// <auto-generated />

#nullable enable

using System.Diagnostics;
using System.Diagnostics.CodeAnalysis;
using System.Linq;

namespace SimpleCompiler.MIR.Internal
{

    internal static class MirFactory
    {
        public static global::SimpleCompiler.MIR.Internal.BinaryOperationExpression BinaryOperationExpression(global::SimpleCompiler.MIR.BinaryOperationKind binaryOperationKind, global::SimpleCompiler.MIR.Internal.Expression left, global::SimpleCompiler.MIR.Internal.Expression right)
        {
#if DEBUG
            if (left == null) throw new global::System.ArgumentNullException(nameof(left));
            if (right == null) throw new global::System.ArgumentNullException(nameof(right));
#endif // DEBUG

            return new global::SimpleCompiler.MIR.Internal.BinaryOperationExpression(global::SimpleCompiler.MIR.MirKind.BinaryOperationExpression, binaryOperationKind, left, right);
        }

        public static global::SimpleCompiler.MIR.Internal.ConstantExpression ConstantExpression(global::SimpleCompiler.MIR.ConstantKind constantKind, object value)
        {
#if DEBUG
            if (value == null) throw new global::System.ArgumentNullException(nameof(value));
#endif // DEBUG

            return new global::SimpleCompiler.MIR.Internal.ConstantExpression(global::SimpleCompiler.MIR.MirKind.ConstantExpression, constantKind, value);
        }

        public static global::SimpleCompiler.MIR.Internal.DiscardExpression DiscardExpression()
        {
#if DEBUG
#endif // DEBUG

            return new global::SimpleCompiler.MIR.Internal.DiscardExpression(global::SimpleCompiler.MIR.MirKind.DiscardExpression);
        }

        public static global::SimpleCompiler.MIR.Internal.FunctionCallExpression FunctionCallExpression(global::SimpleCompiler.MIR.Internal.Expression callee)
        {
#if DEBUG
            if (callee == null) throw new global::System.ArgumentNullException(nameof(callee));
#endif // DEBUG

            return new global::SimpleCompiler.MIR.Internal.FunctionCallExpression(global::SimpleCompiler.MIR.MirKind.FunctionCallExpression, callee, default);
        }

        public static global::SimpleCompiler.MIR.Internal.FunctionCallExpression FunctionCallExpression(global::SimpleCompiler.MIR.Internal.Expression callee, global::SimpleCompiler.MIR.Internal.MirList<global::SimpleCompiler.MIR.Internal.Expression> arguments)
        {
#if DEBUG
            if (callee == null) throw new global::System.ArgumentNullException(nameof(callee));
#endif // DEBUG

            return new global::SimpleCompiler.MIR.Internal.FunctionCallExpression(global::SimpleCompiler.MIR.MirKind.FunctionCallExpression, callee, arguments.Node);
        }

        public static global::SimpleCompiler.MIR.Internal.UnaryOperationExpression UnaryOperationExpression(global::SimpleCompiler.MIR.UnaryOperationKind unaryOperationKind, global::SimpleCompiler.MIR.Internal.Expression operand)
        {
#if DEBUG
            if (operand == null) throw new global::System.ArgumentNullException(nameof(operand));
#endif // DEBUG

            return new global::SimpleCompiler.MIR.Internal.UnaryOperationExpression(global::SimpleCompiler.MIR.MirKind.UnaryOperationExpression, unaryOperationKind, operand);
        }

        public static global::SimpleCompiler.MIR.Internal.VariableExpression VariableExpression(global::SimpleCompiler.MIR.VariableInfo variableInfo)
        {
#if DEBUG
            if (variableInfo == null) throw new global::System.ArgumentNullException(nameof(variableInfo));
#endif // DEBUG

            return new global::SimpleCompiler.MIR.Internal.VariableExpression(global::SimpleCompiler.MIR.MirKind.VariableExpression, variableInfo);
        }

        public static global::SimpleCompiler.MIR.Internal.AssignmentStatement AssignmentStatement()
        {
#if DEBUG
#endif // DEBUG

            return new global::SimpleCompiler.MIR.Internal.AssignmentStatement(global::SimpleCompiler.MIR.MirKind.AssignmentStatement, default, default);
        }

        public static global::SimpleCompiler.MIR.Internal.AssignmentStatement AssignmentStatement(global::SimpleCompiler.MIR.Internal.MirList<global::SimpleCompiler.MIR.Internal.Expression> assignees, global::SimpleCompiler.MIR.Internal.MirList<global::SimpleCompiler.MIR.Internal.Expression> values)
        {
#if DEBUG
#endif // DEBUG

            return new global::SimpleCompiler.MIR.Internal.AssignmentStatement(global::SimpleCompiler.MIR.MirKind.AssignmentStatement, assignees.Node, values.Node);
        }

        public static global::SimpleCompiler.MIR.Internal.EmptyStatement EmptyStatement()
        {
#if DEBUG
#endif // DEBUG

            return new global::SimpleCompiler.MIR.Internal.EmptyStatement(global::SimpleCompiler.MIR.MirKind.EmptyStatement);
        }

        public static global::SimpleCompiler.MIR.Internal.ExpressionStatement ExpressionStatement(global::SimpleCompiler.MIR.Internal.Expression expression)
        {
#if DEBUG
            if (expression == null) throw new global::System.ArgumentNullException(nameof(expression));
#endif // DEBUG

            return new global::SimpleCompiler.MIR.Internal.ExpressionStatement(global::SimpleCompiler.MIR.MirKind.ExpressionStatement, expression);
        }

        public static global::SimpleCompiler.MIR.Internal.StatementList StatementList()
        {
#if DEBUG
#endif // DEBUG

            return new global::SimpleCompiler.MIR.Internal.StatementList(global::SimpleCompiler.MIR.MirKind.StatementList, default, default);
        }

        public static global::SimpleCompiler.MIR.Internal.StatementList StatementList(global::SimpleCompiler.MIR.Internal.MirList<global::SimpleCompiler.MIR.Internal.Statement> statements, global::SimpleCompiler.MIR.ScopeInfo? scopeInfo)
        {
#if DEBUG
#endif // DEBUG

            return new global::SimpleCompiler.MIR.Internal.StatementList(global::SimpleCompiler.MIR.MirKind.StatementList, statements.Node, scopeInfo);
        }
    }


    internal partial class MirVisitor
    {
        public virtual void Visit(global::SimpleCompiler.MIR.Internal.MirNode? node)
        {
            if (node != null)
            {
                node.Accept(this);
            }
        }
        public virtual void VisitBinaryOperationExpression(global::SimpleCompiler.MIR.Internal.BinaryOperationExpression node) => this.DefaultVisit(node);
        public virtual void VisitConstantExpression(global::SimpleCompiler.MIR.Internal.ConstantExpression node) => this.DefaultVisit(node);
        public virtual void VisitDiscardExpression(global::SimpleCompiler.MIR.Internal.DiscardExpression node) => this.DefaultVisit(node);
        public virtual void VisitFunctionCallExpression(global::SimpleCompiler.MIR.Internal.FunctionCallExpression node) => this.DefaultVisit(node);
        public virtual void VisitUnaryOperationExpression(global::SimpleCompiler.MIR.Internal.UnaryOperationExpression node) => this.DefaultVisit(node);
        public virtual void VisitVariableExpression(global::SimpleCompiler.MIR.Internal.VariableExpression node) => this.DefaultVisit(node);
        public virtual void VisitAssignmentStatement(global::SimpleCompiler.MIR.Internal.AssignmentStatement node) => this.DefaultVisit(node);
        public virtual void VisitEmptyStatement(global::SimpleCompiler.MIR.Internal.EmptyStatement node) => this.DefaultVisit(node);
        public virtual void VisitExpressionStatement(global::SimpleCompiler.MIR.Internal.ExpressionStatement node) => this.DefaultVisit(node);
        public virtual void VisitStatementList(global::SimpleCompiler.MIR.Internal.StatementList node) => this.DefaultVisit(node);
        protected virtual void DefaultVisit(global::SimpleCompiler.MIR.Internal.MirNode node) { }
    }

    internal partial class MirVisitor<TResult>
    {
        public virtual TResult? Visit(global::SimpleCompiler.MIR.Internal.MirNode? node) => node == null ? default : node.Accept(this
        );
        public virtual TResult? VisitBinaryOperationExpression(global::SimpleCompiler.MIR.Internal.BinaryOperationExpression node) => this.DefaultVisit(node);
        public virtual TResult? VisitConstantExpression(global::SimpleCompiler.MIR.Internal.ConstantExpression node) => this.DefaultVisit(node);
        public virtual TResult? VisitDiscardExpression(global::SimpleCompiler.MIR.Internal.DiscardExpression node) => this.DefaultVisit(node);
        public virtual TResult? VisitFunctionCallExpression(global::SimpleCompiler.MIR.Internal.FunctionCallExpression node) => this.DefaultVisit(node);
        public virtual TResult? VisitUnaryOperationExpression(global::SimpleCompiler.MIR.Internal.UnaryOperationExpression node) => this.DefaultVisit(node);
        public virtual TResult? VisitVariableExpression(global::SimpleCompiler.MIR.Internal.VariableExpression node) => this.DefaultVisit(node);
        public virtual TResult? VisitAssignmentStatement(global::SimpleCompiler.MIR.Internal.AssignmentStatement node) => this.DefaultVisit(node);
        public virtual TResult? VisitEmptyStatement(global::SimpleCompiler.MIR.Internal.EmptyStatement node) => this.DefaultVisit(node);
        public virtual TResult? VisitExpressionStatement(global::SimpleCompiler.MIR.Internal.ExpressionStatement node) => this.DefaultVisit(node);
        public virtual TResult? VisitStatementList(global::SimpleCompiler.MIR.Internal.StatementList node) => this.DefaultVisit(node);
        protected virtual TResult? DefaultVisit(global::SimpleCompiler.MIR.Internal.MirNode node) => default;
    }

    internal partial class MirVisitor<T1, TResult>
    {
        public virtual TResult? Visit(global::SimpleCompiler.MIR.Internal.MirNode? node, T1 arg1) => node == null ? default : node.Accept(this
        , arg1);
        public virtual TResult? VisitBinaryOperationExpression(global::SimpleCompiler.MIR.Internal.BinaryOperationExpression node, T1 arg1) => this.DefaultVisit(node, arg1);
        public virtual TResult? VisitConstantExpression(global::SimpleCompiler.MIR.Internal.ConstantExpression node, T1 arg1) => this.DefaultVisit(node, arg1);
        public virtual TResult? VisitDiscardExpression(global::SimpleCompiler.MIR.Internal.DiscardExpression node, T1 arg1) => this.DefaultVisit(node, arg1);
        public virtual TResult? VisitFunctionCallExpression(global::SimpleCompiler.MIR.Internal.FunctionCallExpression node, T1 arg1) => this.DefaultVisit(node, arg1);
        public virtual TResult? VisitUnaryOperationExpression(global::SimpleCompiler.MIR.Internal.UnaryOperationExpression node, T1 arg1) => this.DefaultVisit(node, arg1);
        public virtual TResult? VisitVariableExpression(global::SimpleCompiler.MIR.Internal.VariableExpression node, T1 arg1) => this.DefaultVisit(node, arg1);
        public virtual TResult? VisitAssignmentStatement(global::SimpleCompiler.MIR.Internal.AssignmentStatement node, T1 arg1) => this.DefaultVisit(node, arg1);
        public virtual TResult? VisitEmptyStatement(global::SimpleCompiler.MIR.Internal.EmptyStatement node, T1 arg1) => this.DefaultVisit(node, arg1);
        public virtual TResult? VisitExpressionStatement(global::SimpleCompiler.MIR.Internal.ExpressionStatement node, T1 arg1) => this.DefaultVisit(node, arg1);
        public virtual TResult? VisitStatementList(global::SimpleCompiler.MIR.Internal.StatementList node, T1 arg1) => this.DefaultVisit(node, arg1);
        protected virtual TResult? DefaultVisit(global::SimpleCompiler.MIR.Internal.MirNode node, T1 arg1) => default;
    }

    internal partial class MirVisitor<T1, T2, TResult>
    {
        public virtual TResult? Visit(global::SimpleCompiler.MIR.Internal.MirNode? node, T1 arg1, T2 arg2) => node == null ? default : node.Accept(this
        , arg1, arg2);
        public virtual TResult? VisitBinaryOperationExpression(global::SimpleCompiler.MIR.Internal.BinaryOperationExpression node, T1 arg1, T2 arg2) => this.DefaultVisit(node, arg1, arg2);
        public virtual TResult? VisitConstantExpression(global::SimpleCompiler.MIR.Internal.ConstantExpression node, T1 arg1, T2 arg2) => this.DefaultVisit(node, arg1, arg2);
        public virtual TResult? VisitDiscardExpression(global::SimpleCompiler.MIR.Internal.DiscardExpression node, T1 arg1, T2 arg2) => this.DefaultVisit(node, arg1, arg2);
        public virtual TResult? VisitFunctionCallExpression(global::SimpleCompiler.MIR.Internal.FunctionCallExpression node, T1 arg1, T2 arg2) => this.DefaultVisit(node, arg1, arg2);
        public virtual TResult? VisitUnaryOperationExpression(global::SimpleCompiler.MIR.Internal.UnaryOperationExpression node, T1 arg1, T2 arg2) => this.DefaultVisit(node, arg1, arg2);
        public virtual TResult? VisitVariableExpression(global::SimpleCompiler.MIR.Internal.VariableExpression node, T1 arg1, T2 arg2) => this.DefaultVisit(node, arg1, arg2);
        public virtual TResult? VisitAssignmentStatement(global::SimpleCompiler.MIR.Internal.AssignmentStatement node, T1 arg1, T2 arg2) => this.DefaultVisit(node, arg1, arg2);
        public virtual TResult? VisitEmptyStatement(global::SimpleCompiler.MIR.Internal.EmptyStatement node, T1 arg1, T2 arg2) => this.DefaultVisit(node, arg1, arg2);
        public virtual TResult? VisitExpressionStatement(global::SimpleCompiler.MIR.Internal.ExpressionStatement node, T1 arg1, T2 arg2) => this.DefaultVisit(node, arg1, arg2);
        public virtual TResult? VisitStatementList(global::SimpleCompiler.MIR.Internal.StatementList node, T1 arg1, T2 arg2) => this.DefaultVisit(node, arg1, arg2);
        protected virtual TResult? DefaultVisit(global::SimpleCompiler.MIR.Internal.MirNode node, T1 arg1, T2 arg2) => default;
    }

    internal partial class MirVisitor<T1, T2, T3, TResult>
    {
        public virtual TResult? Visit(global::SimpleCompiler.MIR.Internal.MirNode? node, T1 arg1, T2 arg2, T3 arg3) => node == null ? default : node.Accept(this
        , arg1, arg2, arg3);
        public virtual TResult? VisitBinaryOperationExpression(global::SimpleCompiler.MIR.Internal.BinaryOperationExpression node, T1 arg1, T2 arg2, T3 arg3) => this.DefaultVisit(node, arg1, arg2, arg3);
        public virtual TResult? VisitConstantExpression(global::SimpleCompiler.MIR.Internal.ConstantExpression node, T1 arg1, T2 arg2, T3 arg3) => this.DefaultVisit(node, arg1, arg2, arg3);
        public virtual TResult? VisitDiscardExpression(global::SimpleCompiler.MIR.Internal.DiscardExpression node, T1 arg1, T2 arg2, T3 arg3) => this.DefaultVisit(node, arg1, arg2, arg3);
        public virtual TResult? VisitFunctionCallExpression(global::SimpleCompiler.MIR.Internal.FunctionCallExpression node, T1 arg1, T2 arg2, T3 arg3) => this.DefaultVisit(node, arg1, arg2, arg3);
        public virtual TResult? VisitUnaryOperationExpression(global::SimpleCompiler.MIR.Internal.UnaryOperationExpression node, T1 arg1, T2 arg2, T3 arg3) => this.DefaultVisit(node, arg1, arg2, arg3);
        public virtual TResult? VisitVariableExpression(global::SimpleCompiler.MIR.Internal.VariableExpression node, T1 arg1, T2 arg2, T3 arg3) => this.DefaultVisit(node, arg1, arg2, arg3);
        public virtual TResult? VisitAssignmentStatement(global::SimpleCompiler.MIR.Internal.AssignmentStatement node, T1 arg1, T2 arg2, T3 arg3) => this.DefaultVisit(node, arg1, arg2, arg3);
        public virtual TResult? VisitEmptyStatement(global::SimpleCompiler.MIR.Internal.EmptyStatement node, T1 arg1, T2 arg2, T3 arg3) => this.DefaultVisit(node, arg1, arg2, arg3);
        public virtual TResult? VisitExpressionStatement(global::SimpleCompiler.MIR.Internal.ExpressionStatement node, T1 arg1, T2 arg2, T3 arg3) => this.DefaultVisit(node, arg1, arg2, arg3);
        public virtual TResult? VisitStatementList(global::SimpleCompiler.MIR.Internal.StatementList node, T1 arg1, T2 arg2, T3 arg3) => this.DefaultVisit(node, arg1, arg2, arg3);
        protected virtual TResult? DefaultVisit(global::SimpleCompiler.MIR.Internal.MirNode node, T1 arg1, T2 arg2, T3 arg3) => default;
    }


    public partial class MirRewriter : SimpleCompiler.MIR.MirVisitor<global::SimpleCompiler.MIR.MirNode>
    {
        public global::SimpleCompiler.MIR.MirList<TNode> VisitList<TNode>(global::SimpleCompiler.MIR.MirList<TNode> list) where TNode : global::SimpleCompiler.MIR.MirNode
        {
            global::SimpleCompiler.MIR.MirListBuilder? alternate = null;
            for (int i = 0, n = list.Count; i < n; i++)
            {
                var item = list[i];
                var visited = Visit(item);
                if (item != visited && alternate == null)
                {
                    alternate = new global::SimpleCompiler.MIR.MirListBuilder(n);
                    alternate.AddRange(list, 0, i);
                }

                if (alternate != null && visited != null && visited.Kind != global::SimpleCompiler.MIR.MirKind.None)
                {
                    alternate.Add(visited);
                }
            }

            if (alternate != null)
            {
                return alternate.ToList();
            }

            return list;
        }

        public override global::SimpleCompiler.MIR.MirNode VisitBinaryOperationExpression(global::SimpleCompiler.MIR.BinaryOperationExpression node) =>
            node.Update(node.BinaryOperationKind, (global::SimpleCompiler.MIR.Expression?)Visit(node.Left) ?? throw new global::System.InvalidOperationException("Left cannot be null."), (global::SimpleCompiler.MIR.Expression?)Visit(node.Right) ?? throw new global::System.InvalidOperationException("Right cannot be null."));
        public override global::SimpleCompiler.MIR.MirNode VisitConstantExpression(global::SimpleCompiler.MIR.ConstantExpression node) =>
            node.Update(node.ConstantKind, node.Value);
        public override global::SimpleCompiler.MIR.MirNode VisitDiscardExpression(global::SimpleCompiler.MIR.DiscardExpression node) =>
            node;
        public override global::SimpleCompiler.MIR.MirNode VisitFunctionCallExpression(global::SimpleCompiler.MIR.FunctionCallExpression node) =>
            node.Update((global::SimpleCompiler.MIR.Expression?)Visit(node.Callee) ?? throw new global::System.InvalidOperationException("Callee cannot be null."), VisitList(node.Arguments));
        public override global::SimpleCompiler.MIR.MirNode VisitUnaryOperationExpression(global::SimpleCompiler.MIR.UnaryOperationExpression node) =>
            node.Update(node.UnaryOperationKind, (global::SimpleCompiler.MIR.Expression?)Visit(node.Operand) ?? throw new global::System.InvalidOperationException("Operand cannot be null."));
        public override global::SimpleCompiler.MIR.MirNode VisitVariableExpression(global::SimpleCompiler.MIR.VariableExpression node) =>
            node.Update(node.VariableInfo);
        public override global::SimpleCompiler.MIR.MirNode VisitAssignmentStatement(global::SimpleCompiler.MIR.AssignmentStatement node) =>
            node.Update(VisitList(node.Assignees), VisitList(node.Values));
        public override global::SimpleCompiler.MIR.MirNode VisitEmptyStatement(global::SimpleCompiler.MIR.EmptyStatement node) =>
            node;
        public override global::SimpleCompiler.MIR.MirNode VisitExpressionStatement(global::SimpleCompiler.MIR.ExpressionStatement node) =>
            node.Update((global::SimpleCompiler.MIR.Expression?)Visit(node.Expression) ?? throw new global::System.InvalidOperationException("Expression cannot be null."));
        public override global::SimpleCompiler.MIR.MirNode VisitStatementList(global::SimpleCompiler.MIR.StatementList node) =>
            node.Update(VisitList(node.Statements), node.ScopeInfo);
    }
}

